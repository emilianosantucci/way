[tools]
go = "1.25"
node = "latest"
pnpm = "latest"
"go:github.com/nats-io/natscli/nats" = { version = "latest", tags = "nats" }
"go:github.com/jmattheis/goverter/cmd/goverter" = { version = "v1.9.1", tags = "goverter" }

[env]
MISE_GO_SET_GOROOT= true

[tasks."go:build"]
run = "pnpm exec nx run-many -t build"

[tasks."go:tidy"]
run = "pnpm exec nx run-many -t tidy"

[tasks."go:lint"]
run = "pnpm exec nx run-many -t lint"

[tasks."go:test"]
run = "pnpm exec nx run-many -t test"

[tasks."go:convert"]
depends = "go:convert:*"

[tasks."go:convert:core-feature-application"]
depends = "go:convert:core-feature-application:*"

[tasks."go:convert:core-feature-application:dtos"]
run = "goverter gen './libs/core/feature/application/.../dto/...'"

[tasks."go:convert:core-feature-application:models"]
run = "goverter gen './libs/core/feature/application/.../model/...'"

[tasks."go:convert:core-feature-resource-restapi"]
depends = "go:convert:core-feature-resource-restapi:*"

[tasks."go:convert:core-feature-resource-restapi:dtos"]
run = "goverter gen './libs/core/feature/resource/restapi/.../dto/...'"

[tasks."go:convert:core-feature-resource-restapi:models"]
run = "goverter gen './libs/core/feature/resource/restapi/.../model/...'"

[tasks."go:convert:core-feature-resource-route"]
depends = "go:convert:core-feature-resource-route:*"

[tasks."go:convert:core-feature-resource-route:dtos"]
run = "goverter gen './libs/core/feature/resource/route/.../dto/...'"

[tasks."go:convert:core-feature-resource-route:models"]
run = "goverter gen './libs/core/feature/resource/route/.../model/...'"